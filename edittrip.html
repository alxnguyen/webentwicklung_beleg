<!DOCTYPE html>
<header>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="stylesheet.css">
</header>
<body>
    <img class="logo" src="http://via.placeholder.com/300x100" alt="placeholder image">
    <div class="grail">
        <div class="nav">
            <a href="map.html">zurück zur Karte</a>
			<a href="index.html">zurück zum Login</a>
        </div>
		<div class="editwindow">
			<input type="text" size="20" id="tripname" placeholder="Name der Reise" required>
			<select name="Land" id="land_list" required>
				<option value="l1">Land 1</option>
				<option value="l2">Land 2</option>
				<option value="l3">Land 3</option>
				<option value="l4">Land 4</option>
				<option value="l5">Land 5</option>
			</select>
			Start:
			<input type="date" name="Startdatum" id="start" required>
			Ende:
			<input type="date" name="Enddatum" id="ende" required>
			<button type="submit" id="create_btn" name="create" onclick="trip_manager(0)">Reise erstellen</button>
		</div>
		<table id="table1">
			<tr>
				<th>Name</th>
				<th>Land</th>
				<th>Start</th>
				<th>Ende</th>
			</tr>
			<tr>
				<td>Testreise 1</td>
				<td>Hawaii</td>
				<td>21.04.2017</td>
			<td>26.04.2017</td>
			<td class="bCollumn"><button>bearbeiten </button></td>
			<td class="bCollumn"><button>löschen </button></td>
			</tr>
			<tr>
				<td>Testreise 2</td>
				<td>Kuba</td>
				<td>30.04.2017</td>
				<td>4.05.2017</td>
				<td class="bCollumn"><button>bearbeiten </button></td>
				<td class="bCollumn"><button>löschen </button></td>
			</tr>
							<tr>
				<td>Testreise 3</td>
				<td>Mexiko</td>
				<td>10.05.2017</td>
				<td>16.05.2017</td>
				<td class="bCollumn"><button>bearbeiten </button></td>
				<td class="bCollumn"><button>löschen </button></td>
			</tr>
		</table>
    </div>
	<script>
		function trip_manager(index) {
			button_name = document.getElementById("create_btn").name;
			if(button_name === "create") {
				addTrip();
			}
			else {
				editTrip();
			}
		}
		function addTrip() {
			var table = document.getElementById("table1");
			var row = table.insertRow(table.size);
			var name = row.insertCell(0);
			name.id = "" + row + "_0";
			var land = row.insertCell(1);
			land.id = "" + row + "_1";
			var start = row.insertCell(2);
			start.id = "" + row + "_2";
			var ende = row.insertCell(3);
			ende.id = "" + row + "_3";
			var bearbeiten = row.insertCell(4);
			var löschen = row.insertCell(5);
			name.innerHTML = document.getElementById("tripname").value;
			land.innerHTML = document.getElementById("land_list").value;
			start.innerHTML = document.getElementById("start").value;
			ende.innerHTML = document.getElementById("ende").value;
			var btn = document.createElement("BUTTON");
			btn.id = "button" + table.size + "";
			btn.innerHTML = "bearbeiten";
			btn.onclick = function() {bearbeite(row.rowIndex)};
			bearbeiten.className = "bCollumn";
			bearbeiten.appendChild(btn);
			var btn2 = document.createElement("BUTTON");
			btn2.id = "button_del" + table.size + "";
			btn2.innerHTML = "löschen";
			btn2.onclick = function() {lösche(row.rowIndex)};
			löschen.className = "bCollumn";
			löschen.appendChild(btn2);
		}
		
		function bearbeite(row) {
			var button = document.getElementById("create_btn");
			button.name = row;
			button.innerHTML = "Finalisieren";
		}
		
		function editTrip() {
			var index = document.getElementById("create_btn").name;
			var name = document.getElementById("table1").rows[index].cells[0];
			var land = document.getElementById("table1").rows[index].cells[1];
			var start = document.getElementById("table1").rows[index].cells[2];
			var ende = document.getElementById("table1").rows[index].cells[3];
			name.innerHTML = document.getElementById("tripname").value;
			land.innerHTML = document.getElementById("land_list").value;
			start.innerHTML = document.getElementById("start").value;
			ende.innerHTML = document.getElementById("ende").value;
			var button = document.getElementById("create_btn");
			button.name = "create";
			button.innerHTML = "Reise erstellen";
		}
		
		function lösche(index) {
			document.getElementById("table1").deleteRow(index);
		}
	</script>
</body>